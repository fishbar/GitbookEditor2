<!DOCTYPE html>
<html manifest="manifest.appcache">
    <head>
        <meta charset="utf-8">
        <title>GitBook Editor</title>
        <link rel="stylesheet" href="../static/fonts/octicons/octicons.css">
        <link rel="stylesheet" href="../static/application.css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </head>
    <body></body>
    <script type="text/javascript">
        (function() {
            var log = require('../lib/log');
            var lastApp;
            function router() {
              var hash = location.hash.substr(2);
              var url = require('url');
              /**
               * router {
               *     pathname: 路径
               *     query: 查询参数
               * }
               * @type {String}
               */
              var router = url.parse(hash, true);
              var path = require('path');

              if (lastApp) {
                lastApp.destroy();
              }
              lastApp = require(path.join(__dirname, '../controller', router.pathname)).init(router.query);
            }
            window.addEventListener('hashchange', function () {
              log.debug('hashchange');
              router();
            }, false);
            log.debug('init default app');
            router();
        })();
    </script>
    <script type="text/javascript" src="../static/mathjax/MathJax.js?config=TeX-AMS-MML_SVG"></script>
    <!-- <script type="text/javascript" src="static/application.js"></script> -->
</html>
